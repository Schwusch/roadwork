(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){e.exports=n(19)},17:function(e,t,n){},18:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(3),i=n.n(o),c=(n(17),n(4)),l=n(5),s=n(8),u=n(6),d=n(9),m=(n(18),r.a.createContext({apiKey:"",clicked:{},roadworks:[],setContext:function(){}})),h="https://api.trafikinfo.trafikverket.se/v2/data.json",E=function(e,t){return t.reduce(function(e,t){return e&&"undefined"!==e[t]?e[t]:void 0},e)};var f=n(10),v=(n(2),"https://www.google.com/maps/search/?api=1&query=");var p=function(e){var t=e.deviation,n=Object(a.useContext)(m),o=n.setContext,i=n.clicked,c=E(t,["Geometry","WGS84"]);c&&(c=c.match(/\d+\.\d+/g));return r.a.createElement("div",{className:"row",style:{borderColor:i[t.Id]?"lightgreen":"grey"}},r.a.createElement("a",{href:"".concat(v).concat(c[1],",").concat(c[0]),className:"App-link",target:"_blank",rel:"noopener noreferrer",onClick:function(){var e=Object(f.a)({},i);e[t.Id]=t,o({clicked:e})}},t.Message))};var k=function(e){return r.a.createElement(m.Consumer,null,function(e){var t=e.clicked,n=e.roadworks;return n?r.a.createElement("div",{className:"row",style:{marginBottom:10}},r.a.createElement("div",{className:"column"},r.a.createElement("h2",null,"V\xe4garbeten"),n.map(function(e){var t=E(e,["Deviation",0]);return r.a.createElement(p,{deviation:t,key:t.Id})})),r.a.createElement("div",{className:"column"},r.a.createElement("h2",null,"Du har klickat p\xe5:"),Object.values(t).map(function(e){return r.a.createElement(p,{deviation:e,key:e.Id})}))):r.a.createElement("p",null,"Ingen data")})},g=n(7);var y=function(){var e=Object(a.useState)(""),t=Object(g.a)(e,2),n=t[0],o=t[1];return r.a.createElement("div",null,r.a.createElement("label",null,"Skriv in din ",r.a.createElement("code",null,"api"),"-nyckel du f\xe5tt fr\xe5n V\xe4gverket"," "),r.a.createElement("input",{value:n,onChange:function(e){return o(e.target.value)}}),r.a.createElement(m.Consumer,null,function(e){var t=e.setContext;return r.a.createElement("button",{onClick:function(){return t({apiKey:n})},disabled:32!==n.length},"OK")}))},w=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).setContext=function(e){return n.setState(e)},n.initialState={apiKey:"",clicked:{},roadworks:[],setContext:n.setContext},n.state=n.initialState,n.fetchRoadworks=function(){32===n.state.apiKey.length&&function(e){var t='<REQUEST>\n    <LOGIN authenticationkey="'.concat(e,'" />\n    <QUERY objecttype="Situation" schemaversion="1.2" limit="10">\n    <FILTER>\n        <ELEMENTMATCH>\n            <EQ name="Deviation.MessageType" value="V\xe4garbete" />\n        </ELEMENTMATCH>\n    </FILTER>\n    <INCLUDE>Deviation.Id</INCLUDE>\n    <INCLUDE>Deviation.Message</INCLUDE>\n    <INCLUDE>Deviation.Geometry.WGS84</INCLUDE>\n    </QUERY>\n  </REQUEST>');return fetch(h,{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"text/xml"},body:t}).then(function(e){return e.json()}).then(function(e){return E(e,["RESPONSE","RESULT",0,"Situation"])})}(n.state.apiKey).then(function(e){return n.setState({roadworks:e})})},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){if("undefined"!==typeof Storage){var e=null;try{e=JSON.parse(localStorage.state)}catch(t){}this.setState(e||this.state,this.fetchRoadworks)}}},{key:"componentDidUpdate",value:function(){"undefined"!==typeof Storage&&(localStorage.state=JSON.stringify(this.state)),0===this.state.roadworks.length&&this.fetchRoadworks()}},{key:"render",value:function(){var e,t=this;return e=this.state.apiKey&&32===this.state.apiKey.length?r.a.createElement("div",null,r.a.createElement(k,null),r.a.createElement("h5",{onClick:function(){t.setState(t.initialState)}},"reset")):r.a.createElement(y,null),r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(m.Provider,{value:this.state},e)))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},2:function(e,t,n){}},[[11,1,2]]]);
//# sourceMappingURL=main.42688bbb.chunk.js.map